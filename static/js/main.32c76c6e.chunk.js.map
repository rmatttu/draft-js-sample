{"version":3,"sources":["logo.svg","App.js","reportWebVitals.js","index.js"],"names":["App","props","myKeyBindingFn","e","key","onCalculate","getDefaultKeyBinding","compositeDecorator","CompositeDecorator","strategy","handleStrategy","component","HandleSpan","hashtagStrategy","HashtagSpan","numberStrategy","NumberSpan","state","editorState","EditorState","createEmpty","answers","this","setState","blocks","getCurrentContent","getBlocksAsArray","map","i","_tryCalculate","getText","formula","f","Function","NaN","command","newState","RichUtils","handleKeyCommand","onChange","toggleBlockType","src","logo","className","alt","bind","keyBindingFn","value","index","join","JSON","stringify","convertToRaw","React","Component","HANDLE_REGEX","HASHTAG_REGEX","NUMBER_REGEX","HandleStyle","backgroundColor","HashtagStyle","NumberStyle","contentBlock","callback","contentState","findWithRegex","regex","matchArr","start","text","exec","length","console","log","style","data-offset-key","offsetKey","children","reportWebVitals","onPerfEntry","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.32c76c6e.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React from 'react'\nimport { Editor, EditorState, RichUtils, CompositeDecorator, convertToRaw, getDefaultKeyBinding } from 'draft-js';\nimport logo from './logo.svg';\nimport './App.css';\nimport './component.css'\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props)\n\n    const compositeDecorator = new CompositeDecorator([\n      {\n        strategy: handleStrategy,\n        component: HandleSpan,\n      },\n      {\n        strategy: hashtagStrategy,\n        component: HashtagSpan,\n      },\n      {\n        strategy: numberStrategy,\n        component: NumberSpan,\n      },\n    ]);\n    this.state = {\n      editorState: EditorState.createEmpty(compositeDecorator),\n    }\n    this.answers = []\n  }\n\n  onChange(editorState) {\n    this.setState({ editorState })\n  }\n\n  onCalculate() {\n    const content = this.state.editorState.getCurrentContent()\n    const blocks = content.getBlocksAsArray()\n    this.answers = blocks.map(i => this._tryCalculate(i.getText()))\n  }\n\n  _tryCalculate(formula) {\n    let f = null\n    try {\n      f = new Function('\"use strict\";return (' + formula + ')')\n    } catch (e) {\n      return NaN\n    }\n    return f()\n  }\n\n  handleKeyCommand(command) {\n    const newState = RichUtils.handleKeyCommand(this.state.editorState, command)\n    if (newState) {\n      this.onChange(newState)\n      RichUtils.toggleBlockType(this.state.editorState, 'header-two')\n      return true\n    }\n    return false\n  }\n\n  myKeyBindingFn = (e) => {\n    if (e.key === \"Enter\") {\n      this.onCalculate()\n    }\n    return getDefaultKeyBinding(e)\n  }\n\n  render() {\n    return <div>\n      <h1>Draft.js example</h1>\n      <div>\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n      </div>\n      <div>\n        <Editor\n          editorState={this.state.editorState}\n          onChange={this.onChange.bind(this)}\n          handleKeyCommand={this.handleKeyCommand.bind(this)}\n          keyBindingFn={this.myKeyBindingFn}\n        />\n      </div>\n      <div>\n        {this.answers.map((value, index) => `ans[${index}]: ${value}`).join(\" | \")}\n      </div>\n      <br/>\n      <div>\n        {JSON.stringify(convertToRaw(this.state.editorState.getCurrentContent()))}\n      </div>\n    </div>\n  }\n\n\n}\n\n/**\n * Super simple decorators for handles and hashtags, for demonstration\n * purposes only. Don't reuse these regexes.\n */\nconst HANDLE_REGEX = /@[\\w]+/g;\nconst HASHTAG_REGEX = /#[\\w\\u0590-\\u05ff]+/g;\nconst NUMBER_REGEX = /\\d/g;\n\nconst HandleStyle = {\n  backgroundColor: \"#FFCACA\"\n};\n\nconst HashtagStyle = {\n  backgroundColor: \"#FFE564\"\n};\n\nconst NumberStyle = {\n  backgroundColor: \"#00FF2D\"\n};\n\nfunction handleStrategy(contentBlock, callback, contentState) {\n  findWithRegex(HANDLE_REGEX, contentBlock, callback);\n}\n\nfunction hashtagStrategy(contentBlock, callback, contentState) {\n  findWithRegex(HASHTAG_REGEX, contentBlock, callback);\n}\n\nfunction numberStrategy(contentBlock, callback, contentState) {\n  findWithRegex(NUMBER_REGEX, contentBlock, callback);\n}\n\nfunction findWithRegex(regex, contentBlock, callback) {\n  const text = contentBlock.getText();\n  let matchArr, start;\n  while ((matchArr = regex.exec(text)) !== null) {\n    start = matchArr.index;\n    callback(start, start + matchArr[0].length);\n  }\n}\n\nconst HandleSpan = (props) => {\n  console.log(\"メンション\")\n  return (\n    <span\n      style={HandleStyle}\n      data-offset-key={props.offsetKey}\n    >\n      {props.children}\n    </span>\n  );\n};\n\nconst HashtagSpan = (props) => {\n  console.log(\"ハッシュダグ\")\n  return (\n    <span\n      style={HashtagStyle}\n      data-offset-key={props.offsetKey}\n    >\n      {props.children}\n    </span>\n  );\n\n};\n\nconst NumberSpan = (props) => {\n  return (\n    <span\n      style={NumberStyle}\n      data-offset-key={props.offsetKey}\n    >\n      {props.children}\n    </span>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}